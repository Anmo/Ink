---
layout: js-documentation
title: Ink.Net.Ajax_1
description: Cross Browser Ajax requests
site_root:  ../
---
    <section>
        <h1 class="fw-300">Ink.Net.Ajax_1</h1>

<p>Creates a new XMLHttpRequest object</p>
    <p><i class="fa fa-leaf"></i> All samples are using <code>Ink.requireModules</code>, please read how to use it at <a href="/javascript/Ink/#Ink_1-Ink_1-requireModules">Ink.requireModules section</a></p><table class="props bottom-space">
        <caption>Methods</caption>
        <thead>
            <tr>
                <th>Method name</th>
                <th>Description</th>
            </tr>
        </thead>
        
        <tbody>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-Ajax"><em>(constructor)</em></a>
                </td>
                <td><span class="ink-label green">Constructor</span></td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-abort">.abort</a>
                </td>
                <td>Aborts the request if still running. No callbacks are called</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-evalJSON">.evalJSON</a>
                </td>
                <td>Evaluates a given string as JSON</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-finish">.finish</a>
                </td>
                <td>Last step after XHR is complete. Call onComplete and cleanup object</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-getAllHeaders">.getAllHeaders</a>
                </td>
                <td>Gets all the HTTP headers from the response</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-getHeader">.getHeader</a>
                </td>
                <td>Gets an HTTP header from the response</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-getResponse">.getResponse</a>
                </td>
                <td>Sets the response object</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-getTransport">.getTransport</a>
                </td>
                <td>Creates the appropriate XMLHttpRequest object</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-isJSON">.isJSON</a>
                </td>
                <td>Checks if a given string is valid JSON</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-load">.load</a>
                </td>
                <td>Loads content from a given url through an XMLHttpRequest.</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-makeError">.makeError</a>
                </td>
                <td>Returns a new exception object that can be thrown</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-paramsObjToStr">.paramsObjToStr</a>
                </td>
                <td>Converts an object with parameters to a querystring</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-ping">.ping</a>
                </td>
                <td>Loads content from a given url through an XMLHttpRequest.</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-request">.request</a>
                </td>
                <td>Executes the request</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-runStateChange">.runStateChange</a>
                </td>
                <td>Executes the state changing phase of an ajax request</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-safeCall">.safeCall</a>
                </td>
                <td>Safely calls a callback function.</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-setHeaders">.setHeaders</a>
                </td>
                <td>Set the necessary headers for an ajax request</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-setParams">.setParams</a>
                </td>
                <td>Set the url parameters for a GET request</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Net_Ajax_1-Ink_Net_Ajax-setRequestHeader">.setRequestHeader</a>
                </td>
                <td>Sets a new request header for the next http request</td>
            </tr></tbody>
    </table>
    
</section>



    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-Ajax" class="box box-function">
    <h1 class="fw-300">Ink.Net.Ajax(url, options, ) 
    <i>constructor</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop">url</li><li class="prop">options</li>
    </ul>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1"><span class="monospace">url</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">String</span></p>
                <!--</label>-->
                Request URL</li>
            <li class="level1"><span class="monospace">options</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">Object</span></p>
                <!--</label>-->
                Request options</li>
            <li class="level2"><p>
                    <span class="monospace">[options.asynchronous]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Boolean</span></p>
                true<!--</label>-->
                If false, the request synchronous.</li>
            <li class="level2"><p>
                    <span class="monospace">[options.cors]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Boolean</span></p>
                <!--</label>-->
                Flag to activate CORS. Set this to true if you're doing a cross-origin request</li>
            <li class="level2"><p>
                    <span class="monospace">[options.method]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">String</span></p>
                &#x27;POST&#x27;<!--</label>-->
                HTTP request method. POST by default.</li>
            <li class="level2"><p>
                    <span class="monospace">[options.parameters]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Object|String</span></p>
                <!--</label>-->
                Request parameters to be sent with the request</li>
            <li class="level2"><p>
                    <span class="monospace">[options.timeout]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Number</span></p>
                <!--</label>-->
                Request timeout in seconds</li>
            <li class="level2"><p>
                    <span class="monospace">[options.delay]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Number</span></p>
                <!--</label>-->
                Artificial delay. If the request is completed faster than this delay, wait the remaining time before executing the callbacks</li>
            <li class="level2"><p>
                    <span class="monospace">[options.postBody]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">String</span></p>
                <!--</label>-->
                POST request body. If not specified, it's filled with the contents from parameters</li>
            <li class="level2"><p>
                    <span class="monospace">[options.contentType]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">String</span></p>
                <!--</label>-->
                Content-type header to be sent. Defaults to 'application/x-www-form-urlencoded'</li>
            <li class="level2"><p>
                    <span class="monospace">[options.requestHeaders]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Object</span></p>
                <!--</label>-->
                Key-value pairs for additional request headers</li>
            <li class="level2"><p>
                    <span class="monospace">[options.onComplete]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Function</span></p>
                <!--</label>-->
                Callback executed after the request is completed, regardless of what happened during the request.</li>
            <li class="level2"><p>
                    <span class="monospace">[options.onSuccess]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Function</span></p>
                <!--</label>-->
                Callback executed if the request is successful (requests with 2xx status codes)</li>
            <li class="level2"><p>
                    <span class="monospace">[options.onFailure]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Function</span></p>
                <!--</label>-->
                Callback executed if the request fails (requests with status codes different from 2xx)</li>
            <li class="level2"><p>
                    <span class="monospace">[options.onException]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Function</span></p>
                <!--</label>-->
                Callback executed if an exception occurs. Receives the exception as a parameter.</li>
            <li class="level2"><p>
                    <span class="monospace">[options.onCreate]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Function</span></p>
                <!--</label>-->
                Callback executed after object initialization but before the request is made</li>
            <li class="level2"><p>
                    <span class="monospace">[options.onInit]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Function</span></p>
                <!--</label>-->
                Callback executed before any initialization</li>
            <li class="level2"><p>
                    <span class="monospace">[options.onTimeout]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Function</span></p>
                <!--</label>-->
                Callback executed if the request times out</li>
            <li class="level2"><p>
                    <span class="monospace">[options.evalJS]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Boolean|String</span></p>
                true<!--</label>-->
                If the request Content-type header is application/json, evaluates the response and populates responseJSON. Use 'force' if you want to force the response evaluation, no matter what Content-type it's using.</li>
            <li class="level2"><p>
                    <span class="monospace">[options.sanitizeJSON]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">Boolean</span></p>
                <!--</label>-->
                Flag to sanitize the content of responseText before evaluation</li>
            <li class="level2"><p>
                    <span class="monospace">[options.xhrProxy]</span>
                    
                    
                    <!--<li class="level2">--><span class="ink-label orange">String</span></p>
                <!--</label>-->
                URI for proxy service hosted on the same server as the web app, that can fetch documents from other domains. The service must pipe all input and output untouched (some input sanitization is allowed, like clearing cookies). e.g., requesting http://example.org/doc can become /proxy/http%3A%2F%2Fexample.org%2Fdoc The proxy service will be used for cross-domain requests, if set, else a network error is returned as exception.</li>
        </ul>

<!--<h3>Samples</h3>-->
		{% include js_samples/Ink_Net_Ajax_1.html %}
	</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-abort" class="box box-function">
    <h1 class="fw-300">.abort() 
    <i>method</i></h1><p class="text">Aborts the request if still running. No callbacks are called</p>

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-evalJSON" class="box box-function">
    <h1 class="fw-300">.evalJSON(str, sanitize) 
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop">str</li><li class="prop">sanitize</li>
    </ul><p class="text">Evaluates a given string as JSON</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1"><span class="monospace">str</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">String</span></p>
                <!--</label>-->
                String to be evaluated</li>
            <li class="level1"><span class="monospace">sanitize</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">Boolean</span></p>
                <!--</label>-->
                Flag to sanitize the content</li>
        </ul>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><code>Object</code></p>JSON content as an object
        </li>
    </ul>
    

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-finish" class="box box-function">
    <h1 class="fw-300">.finish(response, responseContent) 
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop">response</li><li class="prop">responseContent</li>
    </ul><p class="text">Last step after XHR is complete. Call onComplete and cleanup object</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1"><span class="monospace">response</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">Any</span></p>
                <!--</label>-->
                </li>
            <li class="level1"><span class="monospace">responseContent</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">Any</span></p>
                <!--</label>-->
                </li>
        </ul>

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-getAllHeaders" class="box box-function">
    <h1 class="fw-300">.getAllHeaders() 
    <i>method</i></h1><p class="text">Gets all the HTTP headers from the response</p>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><code>String</code></p>The headers, each separated by a newline
        </li>
    </ul>
    

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-getHeader" class="box box-function">
    <h1 class="fw-300">.getHeader(name) 
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop">name</li>
    </ul><p class="text">Gets an HTTP header from the response</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1"><span class="monospace">name</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">String</span></p>
                <!--</label>-->
                Header name</li>
        </ul>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><code>String</code></p>header  Content
        </li>
    </ul>
    

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-getResponse" class="box box-function">
    <h1 class="fw-300">.getResponse() 
    <i>method</i></h1><p class="text">Sets the response object</p>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><code>Object</code></p>the response object
        </li>
    </ul>
    

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-getTransport" class="box box-function">
    <h1 class="fw-300">.getTransport() 
    <i>method</i></h1><p class="text">Creates the appropriate XMLHttpRequest object</p>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><code>Object</code></p>XMLHttpRequest object
        </li>
    </ul>
    

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-isJSON" class="box box-function">
    <h1 class="fw-300">.isJSON(str) 
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop">str</li>
    </ul><p class="text">Checks if a given string is valid JSON</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1"><span class="monospace">str</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">String</span></p>
                <!--</label>-->
                String to be evaluated</li>
        </ul>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><code>Boolean</code></p>True if the string is valid JSON
        </li>
    </ul>
    

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-load" class="box box-function">
    <h1 class="fw-300">.load(url, callback) 
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop">url</li><li class="prop">callback</li>
    </ul><p class="text">Loads content from a given url through an XMLHttpRequest.<br><p>Shortcut function for simple AJAX use cases. Works with JSON, XML and plain text.</p></p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1"><span class="monospace">url</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">String</span></p>
                <!--</label>-->
                Request URL</li>
            <li class="level1"><span class="monospace">callback</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">Function</span></p>
                <!--</label>-->
                Callback to be executed if the request is successful</li>
        </ul>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><code>Object</code></p>XMLHttpRequest object
        </li>
    </ul>
    

<!--<h3>Samples</h3>-->
		{% include js_samples/Ink_Net_Ajax_load.html %}
	</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-makeError" class="box box-function">
    <h1 class="fw-300">.makeError(code, message) 
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop">code</li><li class="prop">message</li>
    </ul><p class="text">Returns a new exception object that can be thrown</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1"><span class="monospace">code</span>
                    
                    <!--<li class="level1">--></p>
                <!--</label>-->
                Error Code</li>
            <li class="level1"><span class="monospace">message</span>
                    
                    <!--<li class="level1">--></p>
                <!--</label>-->
                Message</li>
        </ul>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><code>Object</code></p>
        </li>
    </ul>
    

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-paramsObjToStr" class="box box-function">
    <h1 class="fw-300">.paramsObjToStr(optParams) 
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop">optParams</li>
    </ul><p class="text">Converts an object with parameters to a querystring</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1"><span class="monospace">optParams</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">Object|String</span></p>
                <!--</label>-->
                parameters object</li>
        </ul>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><code>String</code></p>querystring
        </li>
    </ul>
    

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-ping" class="box box-function">
    <h1 class="fw-300">.ping(url, callback) 
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop">url</li><li class="prop">callback</li>
    </ul><p class="text">Loads content from a given url through an XMLHttpRequest.<br>Shortcut function for simple AJAX use cases.</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1"><span class="monospace">url</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">String</span></p>
                <!--</label>-->
                Request url</li>
            <li class="level1"><span class="monospace">callback</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">Function</span></p>
                <!--</label>-->
                Callback to be executed if the request is successful</li>
        </ul>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><code>Object</code></p>XMLHttpRequest object
        </li>
    </ul>
    

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-request" class="box box-function">
    <h1 class="fw-300">.request() 
    <i>method</i></h1><p class="text">Executes the request</p>

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-runStateChange" class="box box-function">
    <h1 class="fw-300">.runStateChange() 
    <i>method</i></h1><p class="text">Executes the state changing phase of an ajax request</p>

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-safeCall" class="box box-function">
    <h1 class="fw-300">.safeCall(listener) 
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop">listener</li>
    </ul><p class="text">Safely calls a callback function.<br>Verifies that the callback is well defined and traps errors</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1"><span class="monospace">listener</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">Function</span></p>
                <!--</label>-->
                </li>
        </ul>

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-setHeaders" class="box box-function">
    <h1 class="fw-300">.setHeaders(url) 
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop">url</li>
    </ul><p class="text">Set the necessary headers for an ajax request</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1"><span class="monospace">url</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">String</span></p>
                <!--</label>-->
                The url for the request</li>
        </ul>

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-setParams" class="box box-function">
    <h1 class="fw-300">.setParams() 
    <i>method</i></h1><p class="text">Set the url parameters for a GET request</p>

</section>

    <section id="Ink_Net_Ajax_1-Ink_Net_Ajax-setRequestHeader" class="box box-function">
    <h1 class="fw-300">.setRequestHeader(name, value) 
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop">name</li><li class="prop">value</li>
    </ul><p class="text">Sets a new request header for the next http request</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1"><span class="monospace">name</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">String</span></p>
                <!--</label>-->
                </li>
            <li class="level1"><span class="monospace">value</span>
                    
                    <!--<li class="level1">--><span class="ink-label orange">String</span></p>
                <!--</label>-->
                </li>
        </ul>

</section>



    
