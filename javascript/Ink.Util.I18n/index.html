---
layout: js-documentation
title: Ink.Util.I18n_1
description: Internationalization Utilities
site_root:  ../
---
    <section>
        <h1 class="fw-300">Ink.Util.I18n_1</h1>

<p>You can use this module to internationalize your applications. It roughly emulates GNU gettext&#39;s API.</p>
    <p><i class="fa fa-leaf"></i> All samples are using <code>Ink.requireModules</code>, please read how to use it at <a href="/javascript/Ink/#Ink_1-Ink_1-requireModules">Ink.requireModules section</a></p><table class="props bottom-space">
        <caption>Methods</caption>
        <thead>
            <tr>
                <th>Method name</th>
                <th>Description</th>
            </tr>
        </thead>
        
        <tbody>
            <tr>
                <td>
                    <a href="#Ink_Util_I18n_1-Ink_Util_I18n-I18n"><em>(constructor)</em></a>
                </td>
                <td><span class="ink-label green">Constructor</span></td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Util_I18n_1-Ink_Util_I18n-alias">.alias</a>
                </td>
                <td> Create an alias.</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Util_I18n_1-Ink_Util_I18n-append">.append</a>
                </td>
                <td> Adds translation strings for the helper to use.</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Util_I18n_1-Ink_Util_I18n-appendGlobal">.appendGlobal</a>
                </td>
                <td> Adds a dictionary to be used in all I18n instances for the corresponding language.</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Util_I18n_1-Ink_Util_I18n-getKey">.getKey</a>
                </td>
                <td> Gest a key from the current dictionary</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Util_I18n_1-Ink_Util_I18n-lang">.lang</a>
                </td>
                <td> Gets or sets the language.</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Util_I18n_1-Ink_Util_I18n-langGlobal">.langGlobal</a>
                </td>
                <td> Gets or sets the current default language of I18n instances.</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Util_I18n_1-Ink_Util_I18n-ntext">.ntext</a>
                </td>
                <td> Translates and pluralizes text.</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Util_I18n_1-Ink_Util_I18n-ordinal">.ordinal</a>
                </td>
                <td> Gets the ordinal suffix of a number.</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Util_I18n_1-Ink_Util_I18n-reset">.reset</a>
                </td>
                <td> Resets I18n global state (global dictionaries, and default language for instances)</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Util_I18n_1-Ink_Util_I18n-testMode">.testMode</a>
                </td>
                <td> Sets or unsets test mode.</td>
            </tr>
            <tr>
                <td>
                    <a href="#Ink_Util_I18n_1-Ink_Util_I18n-text">.text</a>
                </td>
                <td> Translates a string.</td>
            </tr></tbody>
    </table>
    
</section>



    <section id="Ink_Util_I18n_1-Ink_Util_I18n-I18n" class="box box-function">
    <h1 class="fw-300">Ink.Util.I18n(dict, lang)
    <i>constructor</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop mandatory">
         dict</li><li class="prop">
         lang</li>
    </ul>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1">
                <p>dict
                    <span class="label mandatory"></span><span class="label object"></span></p>
                Object mapping language codes (in the form of `pt_PT`, `pt_BR`, `fr`, `en_US`, etc.) to their `dictionaries`</li>
            <li class="level1">
                <p>lang
                    <span class="label string"></span></p>
                &#x27;pt_PT&#x27;language code of the target language</li>
        </ul>

<!--<h3>Samples</h3>-->
		{% include js_samples/Ink_Util_I18n_1.html %}
	</section>

    <section id="Ink_Util_I18n_1-Ink_Util_I18n-alias" class="box box-function">
    <h1 class="fw-300">.alias()
    <i>method</i></h1><p class="text">Create an alias.<br><p>Returns an alias to this I18n instance. It contains the I18n methods documented here, but is also a function. If you call it, it just calls <code>text()</code>. This is commonly assigned to &quot;_&quot;.</p></p>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><span class="label function"></span> </p>an alias to `text()` on this instance. You can also access the rest of the translation API through this alias.
        </li>
    </ul>
    
<p class="example-title">Example</p>
  
{% highlight html %}{% raw %}
var i18n = new I18n({
    'pt_PT': {
        'hi': 'olá',
        '{} day': '{} dia',
        '{} days': '{} dias',
        '_ordinals': {
            'default': 'º'
        }
    }
}, 'pt_PT');
var _ = i18n.alias();
_('hi');  // -> 'olá'
_('{} days', 3);  // -> '3 dias'
_.ntext('{} day', '{} days', 2);  // -> '2 dias'
_.ntext('{} day', '{} days', 1);  // -> '1 dia'
_.ordinal(3);  // -> 'º'
{% endraw %}{% endhighlight %}



</section>

    <section id="Ink_Util_I18n_1-Ink_Util_I18n-append" class="box box-function">
    <h1 class="fw-300">.append(dict)
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop mandatory">
         dict</li>
    </ul><p class="text">Adds translation strings for the helper to use.</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1">
                <p>dict
                    <span class="label mandatory"></span><span class="label object"></span></p>
                Object containing language objects identified by their language code</li>
        </ul>
<p class="example-title">Example</p>
  
{% highlight html %}{% raw %}
var i18n = new I18n({}, 'pt_PT');
i18n.append({'pt_PT': {
    'sfraggles': 'braggles'
}});
i18n.text('sfraggles') // -> 'braggles'
{% endraw %}{% endhighlight %}



</section>

    <section id="Ink_Util_I18n_1-Ink_Util_I18n-appendGlobal" class="box box-function">
    <h1 class="fw-300">.appendGlobal(dict, lang)
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop mandatory">
         dict</li><li class="prop mandatory">
         lang</li>
    </ul><p class="text">Adds a dictionary to be used in all I18n instances for the corresponding language.</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1">
                <p>dict
                    <span class="label mandatory"></span></p>
                {Object}     Dictionary to be added</li>
            <li class="level1">
                <p>lang
                    <span class="label mandatory"></span></p>
                {String}     Language fo the dictionary being added</li>
        </ul>

</section>

    <section id="Ink_Util_I18n_1-Ink_Util_I18n-getKey" class="box box-function">
    <h1 class="fw-300">.getKey(key)
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop mandatory">
         key</li>
    </ul><p class="text">Gest a key from the current dictionary</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1">
                <p>key
                    <span class="label mandatory"></span><span class="label string"></span></p>
                </li>
        </ul>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><span class="label mixed"></span> </p>The object which happened to be in the current language dictionary on the given key.
        </li>
    </ul>
    
<p class="example-title">Example</p>
  
{% highlight html %}{% raw %}
_.getKey('astring'); // -> 'a translated string'
_.getKey('anobject'); // -> {'a': 'translated object'}
_.getKey('afunction'); // -> function () { return 'this is a localized function' }
{% endraw %}{% endhighlight %}



</section>

    <section id="Ink_Util_I18n_1-Ink_Util_I18n-lang" class="box box-function">
    <h1 class="fw-300">.lang(lang)
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop mandatory">
         lang</li>
    </ul><p class="text">Gets or sets the language.<br>If there are more dictionaries available in cache, they will be loaded.</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1">
                <p>lang
                    <span class="label mandatory"></span><span class="label string"></span></p>
                Language code to set this instance to.</li>
        </ul>

</section>

    <section id="Ink_Util_I18n_1-Ink_Util_I18n-langGlobal" class="box box-function">
    <h1 class="fw-300">.langGlobal(lang)
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop mandatory">
         lang</li>
    </ul><p class="text">Gets or sets the current default language of I18n instances.</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1">
                <p>lang
                    <span class="label mandatory"></span></p>
                the new language for all I18n instances</li>
        </ul>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><span class="label string"></span> </p>language code
        </li>
    </ul>
    

</section>

    <section id="Ink_Util_I18n_1-Ink_Util_I18n-ntext" class="box box-function">
    <h1 class="fw-300">.ntext(strSin, strPlur, count, args*)
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop mandatory">
         strSin</li><li class="prop mandatory">
         strPlur</li><li class="prop mandatory">
         count</li><li class="prop">
         args*</li>
    </ul><p class="text">Translates and pluralizes text.<br>Given a singular string, a plural string and a number, translates either the singular or plural string.</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1">
                <p>strSin
                    <span class="label mandatory"></span><span class="label string"></span></p>
                Word to use when count is 1</li>
            <li class="level1">
                <p>strPlur
                    <span class="label mandatory"></span><span class="label string"></span></p>
                Word to use otherwise</li>
            <li class="level1">
                <p>count
                    <span class="label mandatory"></span><span class="label number"></span></p>
                Number which defines which word to use</li>
            <li class="level1">
                <p>args*
                    </p>
                Extra arguments, to be passed to `text()`</li>
        </ul>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><span class="label string"></span> </p>
        </li>
    </ul>
    
<p class="example-title">Example</p>
  
{% highlight html %}{% raw %}
i18n.ntext('platypus', 'platypuses', 1); // returns 'ornitorrinco'
i18n.ntext('platypus', 'platypuses', 2); // returns 'ornitorrincos'

{% endraw %}{% endhighlight %}
  
{% highlight html %}{% raw %}
// The "count" argument is passed to text()
i18n.ntext('{} platypus', '{} platypuses', 1); // returns '1 ornitorrinco'
i18n.ntext('{} platypus', '{} platypuses', 2); // returns '2 ornitorrincos'
{% endraw %}{% endhighlight %}



</section>

    <section id="Ink_Util_I18n_1-Ink_Util_I18n-ordinal" class="box box-function">
    <h1 class="fw-300">.ordinal(num, options)
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop mandatory">
         num</li><li class="prop">
         options</li>
    </ul><p class="text">Gets the ordinal suffix of a number.<br><p>This works by using transforms (in the form of Objects or Functions) passed into the function or found in the special key <code>_ordinals</code> in the active language dictionary.</p></p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1">
                <p>num
                    <span class="label mandatory"></span><span class="label number"></span></p>
                Input number</li>
            <li class="level1">
                <p>options
                    <span class="label object"></span><span class="label function"></span></p>
                {}Dictionaries for translating. Each of these options' fallback is found in the current language's dictionary. The lookup order is the following: `exceptions`, `byLastDigit`, `default`. Each of these may be either an `Object` or a `Function`. If it's a function, it is called (with `number` and `digit` for any function except for byLastDigit, which is called with the `lastDigit` of the number in question), and if the function returns a string, that is used. If it's an object, the property is looked up using `obj[prop]`. If what is found is a string, it is used directly.</li>
            <li class="level2">
                <p>options.byLastDigit
                    <span class="label object"></span><span class="label function"></span></p>
                {}If the language requires the last digit to be considered, mappings of last digits to ordinal suffixes can be created here.</li>
            <li class="level2">
                <p>options.exceptions
                    <span class="label object"></span><span class="label function"></span></p>
                {}Map unique, special cases to their ordinal suffixes.</li>
        </ul>
    <h3>Returns</h3>
    <ul class="params">
        <li class="return">
            <p><span class="label string"></span> </p>Ordinal suffix for `num`.
        </li>
    </ul>
    
<p class="example-title">Example</p>
  
{% highlight html %}{% raw %}
var i18n = new I18n({
    pt_PT: {  // 1º, 2º, 3º, 4º, ...
        _ordinal: {  // The _ordinals key each translation dictionary is special.
            'default': "º" // Usually the suffix is "º" in portuguese...
        }
    },
    fr: {  // 1er, 2e, 3e, 4e, ...
        _ordinal: {  // The _ordinals key is special.
            'default': "e", // Usually the suffix is "e" in french...
            exceptions: {
                1: "er"   // ... Except for the number one.
            }
        }
    },
    en_US: {  // 1st, 2nd, 3rd, 4th, ..., 11th, 12th, ... 21st, 22nd...
        _ordinal: {
            'default': "th",// Usually the digit is "th" in english...
            byLastDigit: {
                1: "st",  // When the last digit is 1, use "th"...
                2: "nd",  // When the last digit is 2, use "nd"...
                3: "rd"   // When the last digit is 3, use "rd"...
            },
            exceptions: { // But these numbers are special
                0: "",
                11: "th",
                12: "th",
                13: "th"
            }
        }
    }
}, 'pt_PT');

i18n.ordinal(1);    // returns 'º'
i18n.ordinal(2);    // returns 'º'
i18n.ordinal(11);   // returns 'º'

i18n.lang('fr');
i18n.ordinal(1);    // returns 'er'
i18n.ordinal(2);    // returns 'e'
i18n.ordinal(11);   // returns 'e'

i18n.lang('en_US');
i18n.ordinal(1);    // returns 'st'
i18n.ordinal(2);    // returns 'nd'
i18n.ordinal(12);   // returns 'th'
i18n.ordinal(22);   // returns 'nd'
i18n.ordinal(3);    // returns 'rd'
i18n.ordinal(4);    // returns 'th'
i18n.ordinal(5);    // returns 'th'
{% endraw %}{% endhighlight %}



</section>

    <section id="Ink_Util_I18n_1-Ink_Util_I18n-reset" class="box box-function">
    <h1 class="fw-300">.reset()
    <i>method</i></h1><p class="text">Resets I18n global state (global dictionaries, and default language for instances)</p>

</section>

    <section id="Ink_Util_I18n_1-Ink_Util_I18n-testMode" class="box box-function">
    <h1 class="fw-300">.testMode(bool)
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop mandatory">
         bool</li>
    </ul><p class="text">Sets or unsets test mode.<br>In test mode, unknown strings are wrapped in <code>[ ... ]</code>. This is useful for debugging your application and to make sure all your translation keys are in place.</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1">
                <p>bool
                    <span class="label mandatory"></span><span class="label boolean"></span></p>
                Flag to set the test mode state</li>
        </ul>

</section>

    <section id="Ink_Util_I18n_1-Ink_Util_I18n-text" class="box box-function">
    <h1 class="fw-300">.text(str, namedParms, args, arg2, argn*)
    <i>method</i></h1>
    <ul class="props inline">
        <li class="heading">Arguments:</li><li class="prop mandatory">
         str</li><li class="prop">
         namedParms</li><li class="prop">
         args</li><li class="prop">
         arg2</li><li class="prop">
         argn*</li>
    </ul><p class="text">Translates a string.<br>Given a translation key, return a translated string, with replaced parameters.<br>When a translated string is not available, the original string is returned unchanged.</p>
        <h3>Accepts</h3>
        
        <ul class="params">
            <li class="level1">
                <p>str
                    <span class="label mandatory"></span><span class="label string"></span></p>
                Key to look for in i18n dictionary (which is returned verbatim if unknown)</li>
            <li class="level1">
                <p>namedParms
                    <span class="label object"></span></p>
                Named replacements. Replaces {named} with values in this object.</li>
            <li class="level1">
                <p>args
                    <span class="label string"></span></p>
                Replacement #1 (replaces first {} and all {1})</li>
            <li class="level1">
                <p>arg2
                    <span class="label string"></span></p>
                Replacement #2 (replaces second {} and all {2})</li>
            <li class="level1">
                <p>argn*
                    <span class="label string"></span></p>
                Replacement #n (replaces nth {} and all {n})</li>
        </ul>
<p class="example-title">Example</p>
  
{% highlight html %}{% raw %}
_('Gosto muito de {} e o céu é {}.', 'carros', 'azul');
// returns 'Gosto muito de carros e o céu é azul.'

{% endraw %}{% endhighlight %}
  
{% highlight html %}{% raw %}
_('O {1} é {2} como {2} é a cor do {3}.', 'carro', 'azul', 'FCP');
// returns 'O carro é azul como azul é o FCP.'

{% endraw %}{% endhighlight %}
  
{% highlight html %}{% raw %}
_('O {person1} dava-se com a {person2}', {person1: 'coisinho', person2: 'coisinha'});
// -> 'O coisinho dava-se com a coisinha'

{% endraw %}{% endhighlight %}
  
{% highlight html %}{% raw %}
// This is a bit more complex
var i18n = make().lang('pt_PT').append({
    pt_PT: {
        array: [1, 2],
        object: {'a': '-a-', 'b': '-b-'},
        func: function (a, b) {return '[[' + a + ',' + b + ']]';}
    }
});
i18n.text('array', 0); // -> '1'
i18n.text('object', 'a'); // -> '-a-'
i18n.text('func', 'a', 'b'); // -> '[[a,b]]'
{% endraw %}{% endhighlight %}



</section>



    
