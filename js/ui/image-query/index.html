---
layout: default 
title: Javascript UI - Image query
base_path: ../../../
---
<div class="ink-grid">
    <section id="imagequery">
    <h2>Image Query</h2>
    <p class="note"><a href="#imgqueryCode" class="scrollableLink">Skip to the code</a></p>
    <p>The Image Query component allows you to load different versions of an image, depending on the viewport width. This is great when building for various devices, as you can load a smaller image for smaller screens and a bigger one for larger screens, meaning you'll save your users bandwidth on their mobile devices by loading an image which is appropriate for their screensize.</p>
    <p>This component always loads the smaller image first, then, if it detects a larger screen width, it will load the appropriate, larger, image. This certifies that a smaller, probably mobile, device will get the small image.</p>
    <p>The Image Query component is also Retina-screen ready, and can serve an image specifically prepared for those screens.</p>
    <p><span class="ink-label info">Tip</span> You can use this component to serve up three different sizes of the same image, but you can also use it creatively to serve three different images, according to screen width. This allows for great creative flexibility.</p>
    <h3>Necessary JS modules</h3>
    <p>Before you begin, make sure you're including the necessary Javascript inside your <code>&lt;head&gt;</code>. This component works in a slightly different way and requires you to add some extra code. But don't fret, it's pretty simple.</p>
    <p><span class="ink-label info">Code</span></p>
    <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"text/javascript"</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"/js/ink.min.js"</span><span class="tag">&gt;&lt;/script&gt;</span></li><li class="L1"><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"text/javascript"</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"/js/ink.imagequery.js"</span><span class="tag">&gt;&lt;/script&gt;</span></li></ol></pre>
    <h3>Using the Image Query</h3>
    <p>To use this component, you need to declare your image as you normally would in HTML, and then reference it with Javascript and indicate where the alternative images are and at what screen widths they should be shown.</p>
    <p>There are many ways you can reference your images with the component, but as an example, let's say you add an <code>.imagequery</code> class to your <code>&lt;img&gt;</code> element. Then, you can add a template-style bit of code that will take care of the rest, you just need to create a directory structure to hold your images and reference it in the code.</p>
    <p>Let's start with the image.</p>
    <p><span class="ink-label info">Code</span></p>
    <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="tag">&lt;img</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"./imgs/small/image.png"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"imagequery"</span><span class="tag">&gt;</span><span class="pln"> </span><span class="com">&lt;!-- Make sure you always load your small image first --&gt;</span></li></ol></pre>
    <p>Now, add the Javascript. See the following code for a commented example, and scroll down to the View Source Code button to get the functinal example show on this page.</p>
    <p><span class="ink-label info">Code</span></p>
    <p>First create a new instance of the ImageQuery component referencing the CSS selector we used, in this case, the <code>.imagequery</code> class, can be any valid selector</p>
    <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"text/javascript"</span><span class="tag">&gt;</span></li><li class="L1"><span class="pln">    var imagequery = new Ink.UI.ImageQuery('.imagequery',{        </span></li></ol></pre>
        <p>Then, setup the template that will give ImageQuery the correct path for each image. <code>{:label}</code> will read whatever value you give label afterwards, <code>{:file}</code> will read the original filename and look for the same filename in each of the referenced directories.</p>
        <p>In the example, ImageQuery will look in the <code>./imgs/</code> directory for a <code>{:label}</code> sub-directory, containing an <code>image.png</code> file.</p>
        <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">src</span><span class="pun">:</span><span class="pln"> </span><span class="str">'./imgs/{:label}/{:file}'</span><span class="pun">,</span></li></ol></pre>
        <p>Finally, we need to define each of the <code>{:label}</code> elements, according to our directory structure and declare the corresponding screen width.</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">queries</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span></li><li class="L1"><span class="pln">        </span><span class="pun">{</span></li><li class="L2"><span class="pln">            label</span><span class="pun">:</span><span class="pln"> </span><span class="str">'small'</span><span class="pun">,</span></li><li class="L3"><span class="pln">            width</span><span class="pun">:</span><span class="pln"> </span><span class="lit">480</span></li><li class="L4"><span class="pln">        </span><span class="pun">},</span></li><li class="L5"><span class="pln">        </span><span class="pun">{</span></li><li class="L6"><span class="pln">            label</span><span class="pun">:</span><span class="pln"> </span><span class="str">'medium'</span><span class="pun">,</span></li><li class="L7"><span class="pln">            width</span><span class="pun">:</span><span class="pln"> </span><span class="lit">640</span></li><li class="L8"><span class="pln">        </span><span class="pun">},</span></li><li class="L9"><span class="pln">        </span><span class="pun">{</span></li><li class="L0"><span class="pln">            label</span><span class="pun">:</span><span class="pln"> </span><span class="str">'large'</span><span class="pun">,</span></li><li class="L1"><span class="pln">            width</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1024</span></li><li class="L2"><span class="pln">        </span><span class="pun">}</span></li><li class="L3"><span class="pln">    </span><span class="pun">]</span></li><li class="L4"><span class="pun">});</span></li><li class="L5"><span class="pun">&lt;/</span><span class="pln">script</span><span class="pun">&gt;</span></li></ol></pre>
        <p>If you're using images for Retina Displays, then add an extra line, after the <code>src:</code> declaration, with a <code>retina:</code> declaration, indicating the path of that particular asset, for example:</p>
        <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">src</span><span class="pun">:</span><span class="pln"> </span><span class="str">'./imgs/{:label}/{:file}'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&lt;!--</span><span class="pln"> </span><span class="typ">The</span><span class="pln"> original src declaration </span><span class="pun">--&gt;</span></li><li class="L1"><span class="pln">retina</span><span class="pun">:</span><span class="pln"> </span><span class="str">'./imgs/retina/{:label}/{:file}'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&lt;!--</span><span class="pln"> </span><span class="typ">The</span><span class="pln"> retina declaration </span><span class="pun">--&gt;</span></li></ol></pre>
        <p>This works independent of screen size, because we detect whether or not you have a retina display.</p>
        <p id="imgqueryCode"><span class="ink-label success">Example</span></p>
        <p>Below, you can see how different images are being loaded according to your screen width. Hit the Show Source Code button to get the fully functional example.</p>
        <img src="http://imgs.sapo.pt/ink/assets/imgs/imagequery/large/image.jpg" class="large-100 medium-100 small-100 vspace imagequery">

<script type="text/javascript">
    Ink.requireModules( ['Ink.UI.ImageQuery_1'], function( ImageQuery ){
        var tv1 = new Ink.UI.ImageQuery('.imagequery',{
            src: 'http://imgs.sapo.pt/ink/assets/imgs/imagequery/{:label}/{:file}',
            retina: 'http://imgs.sapo.pt/ink/assets/imgs/imagequery/retina/{:file}',
            queries: [
                {
                    label: 'small',
                    width: 480
                },
                {
                    label: 'medium',
                    width: 640
                },
                {
                    label: 'large',
                    width: 1024
                }
            ]
        });
    });
</script>        <button href="#" data-target="#imagequery_sourcecode" class="ink-button toggle">View Source Code</button>
        <pre id="imagequery_sourcecode" class="hide-all prettyprint linenums"><ol class="linenums"><li class="L0"><span class="tag">&lt;img</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"http://imgs.sapo.pt/ink/assets/imgs/imagequery/small/image.jpg"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"large-100 medium-100 small-100 vspace imagequery"</span><span class="tag">/&gt;</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"text/javascript"</span><span class="tag">&gt;</span></li><li class="L3"><span class="pln">    </span><span class="typ">Ink</span><span class="pun">.</span><span class="pln">requireModules</span><span class="pun">(</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Ink.UI.ImageQuery_1'</span><span class="pun">],</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln"> </span><span class="typ">ImageQuery</span><span class="pln"> </span><span class="pun">){</span></li><li class="L4"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> tv1 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Ink</span><span class="pun">.</span><span class="pln">UI</span><span class="pun">.</span><span class="typ">ImageQuery</span><span class="pun">(</span><span class="str">'.imagequery'</span><span class="pun">,{</span></li><li class="L5"><span class="pln">            src</span><span class="pun">:</span><span class="pln"> </span><span class="str">'http://imgs.sapo.pt/ink/assets/imgs/imagequery/{:label}/{:file}'</span><span class="pun">,</span></li><li class="L6"><span class="pln">            retina</span><span class="pun">:</span><span class="pln"> </span><span class="str">'http://imgs.sapo.pt/ink/assets/imgs/imagequery/retina/{:file}'</span><span class="pun">,</span></li><li class="L7"><span class="pln">            queries</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span></li><li class="L8"><span class="pln">                </span><span class="pun">{</span></li><li class="L9"><span class="pln">                    label</span><span class="pun">:</span><span class="pln"> </span><span class="str">'small'</span><span class="pun">,</span></li><li class="L0"><span class="pln">                    width</span><span class="pun">:</span><span class="pln"> </span><span class="lit">480</span></li><li class="L1"><span class="pln">                </span><span class="pun">},</span></li><li class="L2"><span class="pln">                </span><span class="pun">{</span></li><li class="L3"><span class="pln">                    label</span><span class="pun">:</span><span class="pln"> </span><span class="str">'medium'</span><span class="pun">,</span></li><li class="L4"><span class="pln">                    width</span><span class="pun">:</span><span class="pln"> </span><span class="lit">640</span></li><li class="L5"><span class="pln">                </span><span class="pun">},</span></li><li class="L6"><span class="pln">                </span><span class="pun">{</span></li><li class="L7"><span class="pln">                    label</span><span class="pun">:</span><span class="pln"> </span><span class="str">'large'</span><span class="pun">,</span></li><li class="L8"><span class="pln">                    width</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1024</span></li><li class="L9"><span class="pln">                </span><span class="pun">}</span></li><li class="L0"><span class="pln">            </span><span class="pun">]</span></li><li class="L1"><span class="pln">        </span><span class="pun">});</span></li><li class="L2"><span class="pln">    </span><span class="pun">});</span></li><li class="L3"><span class="tag">&lt;/script&gt;</span></li></ol></pre>
        <p>More specifications and other examples, available in the <a target="_blank" href="http://js.ink.sapo.pt/docs/classes/Ink.UI.ImageQuery.html">technical documentation</a>.</p>
</section>
</div>